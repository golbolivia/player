<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Clappr Player Mejorado</title>
    <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-fullscreen-plugin@latest/dist/clappr-fullscreen-plugin.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            background: #000;
            font-family: 'Arial', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #player-wrapper {
            width: 100%;
            max-width: 100%;
            aspect-ratio: 16/9;
            position: relative;
        }
        #poster-overlay {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url('https://d10xsoss226fg9.cloudfront.net/5Sd1MnfA80X5idhqrOnT6vs8wR2ebedj/B05C552148D643158A8AD703B26331CC/il/dbc8bbe6cee8426c987103b0dc0d3346/play-1696001250042.png') no-repeat center center;
            background-size: cover;
            cursor: pointer;
            z-index: 999;
        }
        #unauthorized-message {
            color: red;
            font-size: 22px;
            text-align: center;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>

    <div id="player-wrapper">
        <div id="poster-overlay" onclick="playVideo()"></div>
        <div id="player"></div>
    </div>
    <div id="unauthorized-message">Acceso no autorizado.</div>

    <script>
        const allowedDomain = "golbolivia.com";
        const referrer = document.referrer;
        const videoSource = "https://customer-4ouu9izmq01at8oc.cloudflarestream.com/a09e701d6c4611e29a55187e44fbc00b/manifest/video.m3u8";

        let player = null;

        function initPlayer() {
            player = new Clappr.Player({
                source: videoSource,
                parentId: "#player",
                width: "100%",
                height: "100%",
                autoPlay: false,
                mute: false,
                plugins: [Clappr.FullscreenPlugin],
                fullscreenEnabled: true,
                mediacontrol: { seekbar: "#00adee", buttons: "#ffffff" },
                poster: "", // puedes poner una imagen aquí si deseas
                playback: {
                    hlsUseNextLevel: true,
                    hlsEnableWorker: true,
                    crossOrigin: 'anonymous'
                }
            });
        }

        function playVideo() {
            document.getElementById('poster-overlay').style.display = 'none';
            if (!player) {
                initPlayer();
            }
            player.play();
        }

        // Control de dominio permitido
        if (!referrer.includes(allowedDomain)) {
            document.getElementById('unauthorized-message').style.display = 'block';
            setTimeout(() => {
                window.location.href = 'https://golbolivia.com';
            }, 1000);
        } else {
            // Cargar player solo si el dominio está permitido
            initPlayer();
        }
    </script>

</body>
</html>
