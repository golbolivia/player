<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Player con p√≥ster y recarga de stream</title>
  <script src="https://cdn.jsdelivr.net/npm/@clappr/player@latest/dist/clappr.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      height: 100%;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #player-wrapper {
      position: relative;
      width: 100%;
      max-width: 800px;
      aspect-ratio: 16 / 9;
    }
    #player {
      width: 100%;
      height: 100%;
      background: #000;
    }
    #poster-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7) url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhJnNXt4a1ywW4V6AdrWrKc4vzvHtnbyp4KBpVo5dg1Oe9ciR8bVlkd_21ZlclrYmAwVFv6zIMyAgUw98nxzeR5rbrpRs89e89tA5zTsw_vgo36ZOjTsZGUsnu1LPCDO3EeEM61PcRcZKbJtswa-5XRLO-FBETS1Bbff5EMlcIF-xe6OrVlWwD6gym21S-P/s1600/play.png') no-repeat center center;
      background-size: 80px;
      cursor: pointer;
      z-index: 10;
    }
  </style>
</head>
<body>
  <div id="player-wrapper">
    <div id="poster-overlay" onclick="iniciarPlayer()"></div>
    <div id="player"></div>
  </div>

  <script>
    const STREAM_URL = "https://customer-noiyn2ur5mvy908j.cloudflarestream.com/514879fcb7854bf99a883a4c6ac08314/manifest/video.m3u8";
    let player = null;
    let primeraVez = true;

    function iniciarPlayer() {
      document.getElementById("poster-overlay").style.display = "none";

      player = new Clappr.Player({
        source: STREAM_URL,
        parentId: "#player",
        autoPlay: true,
        mute: false,
        width: "100%",
        height: "100%"
      });

      player.on(Clappr.Events.PLAYER_PLAY, () => {
        if (!primeraVez) {
          player.load(STREAM_URL); // recargar stream
        }
        primeraVez = false;
      });
    }
  </script>
</body>
</html>
